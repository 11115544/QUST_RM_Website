# 如何随时用网址访问网站

本地运行（`npm run dev`）时，只有你在这台电脑上能访问。要想**随时在浏览器输入网址就能访问**（包括手机、别的电脑），需要把网站**部署到互联网**上。

---

## 方式一：用 Vercel 免费部署（推荐）

Vercel 对 Next.js 支持很好，免费额度足够战队使用，几分钟就能得到一个永久网址。

### 1. 把代码放到 GitHub

1. 注册/登录 [GitHub](https://github.com)。
2. 新建一个仓库（Repository），例如取名 `QUST_RM_Website`。
3. 在本地项目文件夹里打开命令行，执行（把 `你的用户名` 换成你的 GitHub 用户名）：

```bash
git init
git add .
git commit -m "初始提交"
git branch -M main
git remote add origin https://github.com/11115544/QUST_RM_Website.git
git push -u origin main
```

如果还没装 Git，可先到 [https://git-scm.com](https://git-scm.com) 下载安装。  
**注意**：`.env` 里有密码等敏感信息，不要提交到 GitHub。若已配置 `.gitignore` 忽略 `.env`，则不会被推送。

### 2. 用 Vercel 部署

1. 打开 [https://vercel.com](https://vercel.com)，用 GitHub 账号登录。
2. 点击 **Add New → Project**，选择你刚推送的 **QUST_RM_Website** 仓库，点 **Import**。
3. **Environment Variables（环境变量）**：
   - 在 Vercel 项目设置里添加变量：
     - `NEXTAUTH_URL`：先填 `https://你的项目名.vercel.app`（部署完成后会显示，可再改）。
     - `NEXTAUTH_SECRET`：填一串随机字符串（如 `my-secret-key-xxx`）。
     - `DATABASE_URL`：**Vercel 上不能使用 `file:./dev.db`**（没有持久化磁盘），否则部署后登录/注册会报错。若要在线上使用完整功能，需使用云端数据库（见下方「Vercel 与数据库」）。
4. 点击 **Deploy**，等待一两分钟。

### 3. 得到网址

部署完成后，Vercel 会给你一个地址，例如：

**https://qust-rm-website-xxx.vercel.app**

以后**随时**在手机或电脑浏览器里输入这个网址，就能访问你们的战队网站。  
之后每次把代码推送到 GitHub，Vercel 一般会自动重新部署，网址不变。

### Vercel 部署常见问题

**1. 构建时的 npm 警告 / 安全提示**

- 项目已做如下调整，可减少警告并修复已知安全问题：
  - 构建命令已包含 `prisma generate`，避免 Prisma 未生成导致构建失败。
  - Next.js 已升级到 14.2.35（安全补丁版本）。
- 若仍有其他 deprecation 警告（如 eslint、glob），不影响部署，可暂时忽略。

**2. Vercel 与数据库（重要）**

- Vercel 是**无状态**环境，不能使用本地的 `file:./dev.db`（SQLite 文件）。
- 若在 Vercel 上填 `DATABASE_URL=file:./dev.db`，网站能打开，但**登录、注册等依赖数据库的功能会报错**。
- 若要在线上正常使用登录/注册/数据管理，需要**云端数据库**，例如：
  - **[Neon](https://neon.tech)**：免费 PostgreSQL，注册后创建项目，复制连接串（Connection string），在 Vercel 环境变量里把 `DATABASE_URL` 设为该连接串。注意：当前项目默认是 SQLite，要接 Neon 需把 Prisma 改为 PostgreSQL（可联系维护者或按 Neon 文档操作）。
  - **Vercel Postgres**：在 Vercel 项目里开通 Storage → Postgres，会自动生成 `DATABASE_URL`，同样需项目支持 PostgreSQL。
- 若**只做对外展示**（首页、战队简介、荣誉等），不登录即可，可先不配置线上数据库，部署后直接访问网址即可。

---

## 方式二：用自己电脑长期开着当“服务器”

不部署到网上，只在自己电脑上长期运行，这样**只有你这台电脑开机且运行着网站时**，才能用网址访问。

1. 让网站一直运行：在项目目录执行 `npm run dev`（或 `npm start`，需先执行过 `npm run build`），不要关掉命令行窗口。
2. 本机访问：浏览器打开 **http://localhost:3000**。
3. 同一 WiFi 下的手机/其他电脑访问：先查本机 IP（命令行执行 `ipconfig`，看 IPv4 地址），在浏览器输入 **http://你的IP:3000**，例如 `http://192.168.1.100:3000`。

缺点：电脑关机或关掉运行窗口，别人就访问不了；且依赖你家/宿舍网络。

---

## 方式三：学校/战队自己的服务器

如果学校或战队有服务器（Linux 等），可以把项目部署到服务器上，然后：

- 用服务器 IP 访问，例如 **http://服务器IP:3000**。
- 或绑定域名，例如 **http://rm.qust.edu.cn**（需学校同意并做域名解析）。

部署步骤大致是：在服务器上安装 Node.js、拉取代码、配置 `.env`、执行 `npm run build` 和 `npm start`（或用 pm2 等保持进程常驻）。需要的话可以再写一份“服务器部署步骤”给你。

---

## 小结

| 方式           | 能否“随时输入网址访问” | 难度 |
|----------------|------------------------|------|
| Vercel 部署    | 可以，全球随时访问     | 低   |
| 本机长期运行   | 仅本机/局域网，且电脑要开着 | 低   |
| 学校/战队服务器 | 可以，用 IP 或域名     | 中   |

**想随时在浏览器输入网址就访问**：推荐用 **Vercel 部署**，得到固定网址后，随时在浏览器输入该网址即可访问。
